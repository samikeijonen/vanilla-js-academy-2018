<!DOCTYPE html>
<html lang="en-US">
<head>
	<title>Toggle Password Visibility</title>

	<meta charset="utf-8">

	<!-- Force latest available IE rendering engine and Chrome Frame (if installed) -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<!-- Mobile Screen Resizing -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link href="../style.css" rel="stylesheet">
</head>
<body>

	<h1>Toggle Password Visibility</h1>

	<h2>Log In</h2>
	<form>
		<div>
			<label for="username">Username</label>
			<input type="text" name="username" id="username">
		</div>

		<div>
			<label for="password">Password</label>
			<input class="password" type="password" name="password" id="password">
		</div>

		<div>
			<label class="no-bold" for="show-password">
				<input class="toggle-passwords" type="checkbox" name="show-password" id="show-password">
				Show password
			</label>
		</div>

		<button type="submit">Log In</button>
	</form>


	<h2>Update Password</h2>
	<form>
		<div>
			<label for="current-pw">Current Password</label>
			<input class="password" type="password" name="current-pw" id="current-pw">
		</div>

		<div>
			<label for="new-pw">New Password</label>
			<input class="password" type="password" name="new-pw" id="new-pw">
		</div>

		<div>
			<label class="no-bold" for="show-passwords">
				<input class="toggle-passwords" type="checkbox" name="show-passwords" id="show-passwords">
				Show passwords
			</label>
		</div>

		<button type="submit">Change Password</button>
	</form>

	<script>
		document.documentElement.addEventListener( 'click', function (event) {
			// Bail if we didn't click toggle-passwords checkbox.
			if ( ! event.target.matches( '.toggle-passwords' ) ) {
				return;
			}

			// Get form and password fields inside it.
			var form      = event.target.closest( 'form' );
			var passwords = form.querySelectorAll( '.password' );

			// Loop over passwords fields and toggle password visibility.
			Array.from( passwords ).forEach( function(password) {
				password.setAttribute( 'type', setInputType( event.target ) );
			});
		}, false );

		/**
		 * Input type, password or text.
		 *
		 * @return string
		 */
		function setInputType( checkbox ) {
			return checkbox.checked ? 'text': 'password';
		}
	</script>

</body>
</html>
